<div class="dashboard section-content" id="dashboard-section">
    <h1 class="page-title">Tổng quan</h1>
    
    <!-- Stats Cards -->
    <div class="stats-container">
        <div class="stat-card">
            <div class="stat-icon sales">
                <i class="fas fa-money-bill-wave"></i>
            </div>
            <div class="stat-info">
                <h3>24.5M</h3>
                <p>Doanh thu</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon orders">
                <i class="fas fa-shopping-bag"></i>
            </div>
            <div class="stat-info">
                <h3><%=orderCount%></h3>
                <p>Đơn hàng</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon customers">
                <i class="fas fa-users"></i>
            </div>
            <div class="stat-info">
                <h3><%= customerCount%></h3>
                <p>Khách hàng</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon products">
                <i class="fas fa-box"></i>
            </div>
            <div class="stat-info">
                <h3><%= productCount%></h3>
                <p>Sản phẩm</p>
            </div>
        </div>
    </div>

    <!-- Charts -->
    <div class="chart-container">
        <div class="chart-card">
            <div class="chart-header">
                <div class="chart-title">Doanh thu theo thời gian</div>
                <div class="chart-actions">
                    <select id="revenue-time-range">
                        <option value="week">Tuần này</option>
                        <option value="month" selected>Tháng này</option>
                        <option value="year">Năm nay</option>
                    </select>
                </div>
            </div>
            <div class="chart">
                <canvas id="revenue-chart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-header">
                <div class="chart-title">Sản phẩm bán chạy</div>
                <div class="chart-actions">
                    <select id="top-products-range">
                        <option value="week">Tuần này</option>
                        <option value="month" selected>Tháng này</option>
                        <option value="year">Năm nay</option>
                    </select>
                </div>
            </div>
            <div class="chart">
                <canvas id="products-chart"></canvas>
            </div>
        </div>
    </div>

    <!-- Recent Orders -->
    <div class="recent-orders">
        <div class="table-header">
            <div class="table-title">Đơn hàng gần đây</div>
            <a href="/admin/orders" class="view-all">Xem tất cả</a>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Mã đơn hàng</th>
                    <th>Khách hàng</th>
                    <th>Ngày đặt</th>
                    <th>Tổng tiền</th>
                    <th>Trạng thái</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>#ORD-0123</td>
                    <td>Nguyễn Văn A</td>
                    <td>15/05/2023</td>
                    <td>1,250,000 ₫</td>
                    <td><span class="status completed">Hoàn thành</span></td>
                    <td>
                        <button class="action-btn"><i class="fas fa-eye"></i></button>
                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>#ORD-0122</td>
                    <td>Trần Thị B</td>
                    <td>14/05/2023</td>
                    <td>850,000 ₫</td>
                    <td><span class="status processing">Đang xử lý</span></td>
                    <td>
                        <button class="action-btn"><i class="fas fa-eye"></i></button>
                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>#ORD-0121</td>
                    <td>Lê Văn C</td>
                    <td>13/05/2023</td>
                    <td>2,150,000 ₫</td>
                    <td><span class="status pending">Chờ thanh toán</span></td>
                    <td>
                        <button class="action-btn"><i class="fas fa-eye"></i></button>
                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>#ORD-0120</td>
                    <td>Phạm Thị D</td>
                    <td>12/05/2023</td>
                    <td>750,000 ₫</td>
                    <td><span class="status completed">Hoàn thành</span></td>
                    <td>
                        <button class="action-btn"><i class="fas fa-eye"></i></button>
                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>#ORD-0119</td>
                    <td>Hoàng Văn E</td>
                    <td>11/05/2023</td>
                    <td>1,550,000 ₫</td>
                    <td><span class="status processing">Đang xử lý</span></td>
                    <td>
                        <button class="action-btn"><i class="fas fa-eye"></i></button>
                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div id="myData" data-chart="<%= JSON.stringify(chart)%>" data-b=""></div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    
    const revenueCtx = document.getElementById('revenue-chart').getContext('2d');
    const revenueChart = new Chart(revenueCtx, {
      type: 'line',
      data: {
        labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
        datasets: [{
          label: 'Doanh thu (triệu ₫)',
          data: [18, 22, 19, 24, 25, 28, 30, 32, 28, 26, 22, 24],
          backgroundColor: 'rgba(67, 97, 238, 0.1)',
          borderColor: '#4361ee',
          borderWidth: 2,
          tension: 0.3,
          fill: true
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true,
            grid: {
              color: 'rgba(0, 0, 0, 0.05)'
            }
          },
          x: {
            grid: {
              display: false
            }
          }
        },
        plugins: {
          legend: {
            display: false
          }
        }
      }
    });

    // Products Chart
    const productsCtx = document.getElementById('products-chart').getContext('2d');
    


    const productsChartData = JSON.parse(document.getElementById('myData').dataset.chart)
    


    const productsChart = new Chart(productsCtx, {
      type: 'doughnut',
      data: {
        labels: productsChartData[0],
        datasets: [{
          data: productsChartData[1],
          backgroundColor: [
            '#4361ee',
            '#4cc9f0',
            '#f72585',
            '#3f37c9',
            '#4895ef'
          ],
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              boxWidth: 12,
              padding: 15
            }
          }
        }
      }
    });
</script>